(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{182:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(12),i=n.n(c),o=n(24),s=n(8),l=(n(153),n(221)),d=n(15),j=n(33),u=n(14),h=n.n(u),b=function(){return h.a.delete("/api/auth/logout").then((function(e){return e.data})).catch((function(e){return e.response.data}))},f=n(246),O=n(185),m=n(244),p=n(225),x=n(92),g=n(219),v=n(84),k=n.n(v),y=n(70),C=n(216),S=n(1),w=Object(C.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://images.unsplash.com/photo-1541613569553-332a2574a508)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function N(e){var t=w(),n=Object(a.useState)(""),r=Object(s.a)(n,2),c=r[0],i=r[1],o=Object(a.useState)(""),d=Object(s.a)(o,2),u=d[0],b=d[1],v=Object(a.useState)(""),C=Object(s.a)(v,2),N=C[0],_=C[1],I=Object(a.useState)(""),R=Object(s.a)(I,2),T=R[0],M=R[1];return Object(S.jsxs)(g.a,{container:!0,component:"main",className:t.root,children:[Object(S.jsx)(l.a,{}),Object(S.jsx)(g.a,{item:!0,xs:!1,sm:4,md:7,className:t.image}),Object(S.jsx)(g.a,{item:!0,xs:12,sm:8,md:5,component:x.a,elevation:6,square:!0,children:Object(S.jsxs)("div",{className:t.paper,children:[Object(S.jsx)(f.a,{className:t.avatar,children:Object(S.jsx)(k.a,{})}),Object(S.jsx)(y.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(S.jsxs)("form",{className:t.form,onSubmit:function(t){t.preventDefault(),function(e,t){return h.a.post("/api/auth/login",{username:e,password:t}).then((function(e){return e.data})).catch((function(e){return e.response.data}))}(c,u).then((function(t){t.usernameError?(_(t.usernameError),M("")):t.passwordError?(_(""),M(t.passwordError)):(e.setUser(t),e.history.push("/"))}))},noValidate:!0,children:[Object(S.jsx)(m.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,value:c,onChange:function(e){return i(e.target.value)},error:!!N,helperText:N}),Object(S.jsx)(m.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:u,onChange:function(e){return b(e.target.value)},error:!!T,helperText:T}),Object(S.jsx)(O.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,children:"Sign In"}),Object(S.jsx)(g.a,{container:!0,children:Object(S.jsx)(g.a,{item:!0,children:Object(S.jsx)(p.a,{component:j.b,to:"/signup",variant:"body2",children:"Don't have an account? Sign Up"})})})]})]})})]})}var _=n(226),I=Object(C.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}));function R(e){var t=I(),n=Object(a.useState)(""),r=Object(s.a)(n,2),c=r[0],i=r[1],o=Object(a.useState)(""),d=Object(s.a)(o,2),u=d[0],b=d[1],x=Object(a.useState)(""),v=Object(s.a)(x,2),C=v[0],w=v[1],N=Object(a.useState)(""),R=Object(s.a)(N,2),T=R[0],M=R[1],E=Object(a.useState)(""),L=Object(s.a)(E,2),z=L[0],U=L[1],D=Object(a.useState)(""),W=Object(s.a)(D,2),F=W[0],H=W[1];return Object(S.jsxs)(_.a,{component:"main",maxWidth:"xs",children:[Object(S.jsx)(l.a,{}),Object(S.jsxs)("div",{className:t.paper,children:[Object(S.jsx)(f.a,{className:t.avatar,children:Object(S.jsx)(k.a,{})}),Object(S.jsx)(y.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(S.jsxs)("form",{className:t.form,onSubmit:function(t){t.preventDefault(),u===C?function(e,t){return h.a.post("/api/auth/signup",{username:e,password:t}).then((function(e){return e.data})).catch((function(e){return e.response.data}))}(c,u).then((function(t){t.usernameError?(M(t.usernameError),U("")):t.passwordError?(M(""),U(t.passwordError)):(e.setUser(t),e.history.push("/"))})):H("Passwords do not match")},noValidate:!0,children:[Object(S.jsxs)(g.a,{container:!0,spacing:2,children:[Object(S.jsx)(g.a,{item:!0,xs:12,children:Object(S.jsx)(m.a,{variant:"outlined",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",value:c,onChange:function(e){return i(e.target.value)},error:!!T,helperText:T,autoFocus:!0})}),Object(S.jsx)(g.a,{item:!0,xs:12,children:Object(S.jsx)(m.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",value:u,onChange:function(e){return b(e.target.value)},error:!!z,helperText:z})}),Object(S.jsx)(g.a,{item:!0,xs:12,children:Object(S.jsx)(m.a,{variant:"outlined",required:!0,fullWidth:!0,name:"confirm",label:"Confirm",type:"password",id:"confirm",value:C,onChange:function(e){return w(e.target.value)},error:!!F,helperText:F})})]}),Object(S.jsx)(O.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,children:"Sign Up"}),Object(S.jsx)(g.a,{container:!0,justify:"flex-end",children:Object(S.jsx)(g.a,{item:!0,children:Object(S.jsx)(p.a,{component:j.b,to:"/signin",variant:"body2",children:"Already have an account? Sign in"})})})]})]})]})}var T=n(10),M=n(4),E=n(13),L=n(242),z=n(237),U=n(238),D=n(232),W=n(228),F=n(123),H=n.n(F),B=function(e,t,n,a){return h.a.get("/api/feeds?id=".concat(e,"&q=").concat(t,"&skip=").concat(n,"&limit=").concat(a)).then((function(e){return e.data})).catch((function(e){return e}))},P=function(e){var t=new URL(e);return"https://logo.clearbit.com/".concat(t.hostname)},Q=function(e){var t=Date.now()-new Date(e);return Math.floor(t/31536e6)>0?"".concat(Math.floor(t/31536e6),"y"):Math.floor(t/6048e5)?"".concat(Math.floor(t/6048e5),"w"):Math.floor(t/864e5)?"".concat(Math.floor(t/864e5),"d"):Math.floor(t/36e5)?"".concat(Math.floor(t/36e5),"h"):Math.floor(t/6e4)?"".concat(Math.floor(t/6e4),"min"):Math.floor(t/1e3)?"".concat(Math.floor(t/1e3),"s"):void 0},A=function(e){return h.a.put("/api/feeds/item/".concat(e),{starred:!0}).then((function(e){return e.data})).catch((function(e){return e.response.data}))},q=function(e){return h.a.put("/api/feeds/item/".concat(e),{starred:!1}).then((function(e){return e.data})).catch((function(e){return e.response.data}))},V=function(){return h.a.get("/api/feeds/starred").then((function(e){return e.data})).catch((function(e){return e}))},G=function(e){return h.a.put("/api/feeds/item/".concat(e),{read:!0}).then((function(e){return e.data})).catch((function(e){return e.response.data}))},J=function(e){return h.a.put("/api/feeds/item/".concat(e),{read:!1}).then((function(e){return e.data})).catch((function(e){return e.response.data}))},X=function(e){return h.a.put("/api/feeds/item/read",{read:e}).then((function(e){return e.data})).catch((function(e){return e.response.data}))},K=function(e){return h.a.get("/api/feeds/".concat(e,"/read")).then((function(e){return e.data})).catch((function(e){return e}))},Y=function(){return h.a.get("/api/feeds/read-starred").then((function(e){return e.data})).catch((function(e){return e}))},Z=n(234),$=n(186),ee=n(229),te=n(227),ne=n(230),ae=n(57),re=n.n(ae),ce=n(58),ie=n.n(ce),oe=n(248),se=n(231),le=n(54),de=n.n(le),je=n(86),ue=n.n(je),he=n(44),be=n.n(he),fe=n(46),Oe=n.n(fe),me=Object(C.a)((function(e){return{feedItem:{padding:e.spacing(0,9,3,9)},feedItemHeading:{paddingBottom:e.spacing(1)},feedHeader:{display:"flex",justifyContent:"space-between"},toolbar:{paddingBottom:e.spacing(2)},highlight:{color:"inherit",backgroundColor:e.palette.primary.main}}}));function pe(e){var t=me(),n=Object(a.useState)(!1),r=Object(s.a)(n,2),c=r[0],i=r[1],o=function(){i(!c)};return Object(S.jsxs)(S.Fragment,{children:[c?Object(S.jsxs)($.a,{dense:!0,onClick:o,children:[Object(S.jsx)(te.a,{}),e.read?Object(S.jsx)(oe.a,{title:"Close",children:Object(S.jsx)(W.a,{size:"small",children:Object(S.jsx)(de.a,{})})}):Object(S.jsx)(oe.a,{title:"Mark read",children:Object(S.jsx)(W.a,{size:"small",onClick:function(){return e.handleMarkRead(e.item._id)},children:Object(S.jsx)(be.a,{})})})]}):Object(S.jsxs)($.a,{button:!0,dense:!0,children:[Object(S.jsx)(ee.a,{children:Object(S.jsx)(oe.a,{title:"Read later",children:e.starred?Object(S.jsx)(W.a,{size:"small",onClick:function(){return e.handleUnstarItem(e.item._id)},children:Object(S.jsx)(re.a,{fontSize:"small",color:e.read?"disabled":"inherit"})}):Object(S.jsx)(W.a,{size:"small",onClick:function(){return e.handleStarItem(e.item._id)},children:Object(S.jsx)(ie.a,{fontSize:"small",color:e.read?"disabled":"inherit"})})})}),Object(S.jsx)(te.a,{onClick:o,primary:Object(S.jsxs)("div",{className:t.feedHeader,children:[Object(S.jsx)(y.a,{color:e.read?"textSecondary":"textPrimary",children:Object(S.jsx)(Oe.a,{highlightClassName:t.highlight,searchWords:[e.searchQuery],autoEscape:!0,textToHighlight:e.item.title})}),Object(S.jsx)("span",{children:Object(S.jsx)(y.a,{variant:"caption",color:e.read?"textSecondary":"textPrimary",children:Q(e.item.isoDate)})})]})})]}),Object(S.jsx)(ne.a,{in:c,timeout:"auto",unmountOnExit:!0,children:Object(S.jsxs)(_.a,{component:"div",className:t.feedItem,children:[Object(S.jsx)(y.a,{variant:"h5",color:e.read?"textSecondary":"textPrimary",className:t.feedItemHeading,children:e.read?Object(S.jsx)(p.a,{href:e.item.link,target:"_blank",rel:"noreferrer",color:"inherit",underline:"none",children:Object(S.jsx)(Oe.a,{highlightClassName:t.highlight,searchWords:[e.searchQuery],autoEscape:!0,textToHighlight:e.item.title})}):Object(S.jsx)(p.a,{href:e.item.link,target:"_blank",rel:"noreferrer",color:"inherit",underline:"none",onClick:function(){return e.handleMarkRead(e.item._id)},children:Object(S.jsx)(Oe.a,{highlightClassName:t.highlight,searchWords:[e.searchQuery],autoEscape:!0,textToHighlight:e.item.title})})}),e.item.author||e.item.creator?Object(S.jsxs)(y.a,{variant:"subtitle2",paragraph:!0,children:[e.feedTitle," by ",e.item.author||e.item.creator,", ",new Date(e.item.isoDate).toLocaleString()," ",e.read?Object(S.jsx)(p.a,{href:"#",color:"textSecondary",onClick:function(){return e.handleUnmarkRead(e.item._id)},children:"mark unread"}):""]}):Object(S.jsxs)(y.a,{variant:"subtitle2",paragraph:!0,children:[e.feedTitle,", ",new Date(e.item.isoDate).toLocaleString()," ",e.read?Object(S.jsx)(p.a,{href:"#",color:"textSecondary",onClick:function(){return e.handleUnmarkRead(e.item._id)},children:"mark unread"}):""]}),e.item.categories.length>0?Object(S.jsxs)(y.a,{variant:"subtitle2",paragraph:!0,children:["Category: ",e.item.categories.join(", ")]}):Object(S.jsx)(S.Fragment,{}),Object(S.jsxs)(se.a,{className:t.toolbar,children:[Object(S.jsx)(oe.a,{title:"Read later",children:e.starred?Object(S.jsx)(O.a,{"aria-label":"read later",onClick:function(){return e.handleUnstarItem(e.item._id)},children:Object(S.jsx)(re.a,{})}):Object(S.jsx)(O.a,{"aria-label":"read later",onClick:function(){return e.handleStarItem(e.item._id)},children:Object(S.jsx)(ie.a,{})})}),Object(S.jsx)(O.a,{children:"Share"})]}),e.item["content:encoded"]||e.item.content?Object(S.jsx)(y.a,{variant:"body1",paragraph:!0,dangerouslySetInnerHTML:{__html:ue.a.sanitize(e.item["content:encoded"]||e.item.content)}}):Object(S.jsx)(S.Fragment,{}),e.read?Object(S.jsx)(O.a,{href:e.item.link,target:"_blank",rel:"noreferrer",variant:"outlined",fullWidth:!0,children:"Visit Website"}):Object(S.jsx)(O.a,{href:e.item.link,target:"_blank",rel:"noreferrer",variant:"outlined",fullWidth:!0,onClick:function(){return e.handleMarkRead(e.item._id)},children:"Visit Website"})]})}),Object(S.jsx)(D.a,{})]})}var xe=n(128),ge=n(233),ve=n(87),ke=n.n(ve),ye=n(120),Ce=n.n(ye);function Se(e){var t=r.a.useState(null),n=Object(s.a)(t,2),a=n[0],c=n[1],i=function(){c(null)};return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(oe.a,{title:"More options",children:Object(S.jsx)(W.a,{onClick:function(e){c(e.currentTarget)},children:Object(S.jsx)(ke.a,{})})}),Object(S.jsx)(xe.a,{anchorEl:a,getContentAnchorEl:null,keepMounted:!0,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},open:Boolean(a),onClose:i,children:Object(S.jsxs)(ge.a,{dense:!0,onClick:function(){var t;(t=e.feedId,h.a.delete("/api/feeds/".concat(t)).then((function(e){return e.data})).catch((function(e){return e}))).then((function(){i(),e.history.push("/")})).catch((function(e){console.log(e)}))},children:[Object(S.jsx)(ee.a,{children:Object(S.jsx)(Ce.a,{fontSize:"small"})}),Object(S.jsx)(te.a,{children:"Unfollow"})]})})]})}var we=n(224),Ne=n(88),_e=n.n(Ne),Ie=n(235),Re=n(89),Te=n.n(Re),Me=n(121),Ee=Object(C.a)((function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper},feedDetails:{paddingTop:e.spacing(2)},feedHeader:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},feedToolbar:{display:"flex"},feedList:{padding:0}}}));function Le(e){var t=Ee(),n=Object(a.useState)(null),r=Object(s.a)(n,2),c=r[0],i=r[1],l=Object(a.useState)(null),d=Object(s.a)(l,2),j=(d[0],d[1],Object(a.useState)(null)),u=Object(s.a)(j,2),b=u[0],f=u[1],O=Object(a.useState)(null),m=Object(s.a)(O,2),x=m[0],g=m[1],v=Object(a.useState)(null),k=Object(s.a)(v,2),C=k[0],w=k[1],N=Object(a.useState)(!0),I=Object(s.a)(N,2),R=I[0],T=I[1],M=function(e){A(e).then((function(e){e.message?console.log(e.message):f(e)})).catch((function(e){console.log(e)}))},E=function(e){q(e).then((function(e){f(e)})).catch((function(e){console.log(e)}))},L=function(e){G(e).then((function(e){e.message?console.log(e.message):K(c._id).then((function(e){g(e)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))},z=function(e){J(e).then((function(){K(c._id).then((function(e){g(e)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))},U=function(){var t;w(null),T(!0),(t=e.match.params.id,h.a.get("/api/feeds?id=".concat(t)).then((function(e){return e.data})).catch((function(e){return e}))).then((function(t){i(t),e.setTitle(t.title),K(t._id).then((function(n){g(n),V().then((function(n){f(n),B(t._id,e.searchQuery,0,40).then((function(e){w(e)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))};return Object(a.useEffect)((function(){U()}),[e.match.params.id,e.searchQuery]),C?Object(S.jsxs)("div",{id:"feed",className:t.root,children:[Object(S.jsxs)(_.a,{component:"div",className:t.feedDetails,children:[Object(S.jsxs)("div",{className:t.feedHeader,children:[Object(S.jsx)(y.a,{variant:"h4",children:Object(S.jsx)(p.a,{href:c.link,target:"_blank",rel:"noreferrer",color:"inherit",underline:"none",children:c.title})}),Object(S.jsxs)("div",{className:t.feedToolbar,children:[C.length-x.length===0?Object(S.jsx)(oe.a,{title:"All Read",children:Object(S.jsx)(W.a,{children:Object(S.jsx)(_e.a,{})})}):Object(S.jsx)(oe.a,{title:"Mark as Read",children:Object(S.jsx)(Ie.a,{anchorOrigin:{vertical:"top",horizontal:"left"},badgeContent:C.length-x.length,color:"primary",overlap:"circle",max:999,children:Object(S.jsx)(W.a,{onClick:function(){return function(e){var t=e.map((function(e){return e._id}));X(t).then((function(e){e.message?console.log(e.message):K(c._id).then((function(e){g(e)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}(C)},children:Object(S.jsx)(be.a,{})})})}),Object(S.jsx)(oe.a,{title:"Refresh",children:Object(S.jsx)(W.a,{onClick:function(){return U()},children:Object(S.jsx)(Te.a,{})})}),Object(S.jsx)(oe.a,{title:"More options",children:Object(S.jsx)(Se,{feedId:c._id,history:e.history})})]})]}),c.description?Object(S.jsx)(y.a,{variant:"subtitle1",children:c.description}):Object(S.jsx)(S.Fragment,{}),c.category?Object(S.jsxs)(y.a,{variant:"subtitle2",paragraph:!0,children:["Category: ",c.category.join(", "),", ",C.length," articles"]}):Object(S.jsxs)(y.a,{variant:"subtitle2",paragraph:!0,children:[C.length," articles"]})]}),Object(S.jsx)(D.a,{}),Object(S.jsx)(we.a,{className:t.feedList,children:Object(S.jsx)(Me.a,{dataLength:C.length,next:function(){B(c._id,e.searchQuery,C.length,40).then((function(e){0===e.length?T(!1):w(C.concat(e))})).catch((function(e){console.log(e)}))},hasMore:R,loader:Object(S.jsx)(Z.a,{}),scrollableTarget:"content",children:C.map((function(t){return Object(S.jsx)(pe,Object(o.a)({feedTitle:c.title,item:t,handleStarItem:M,handleUnstarItem:E,starred:b.includes(t._id),handleMarkRead:L,handleUnmarkRead:z,read:x.includes(t._id)},e),t._id)}))})})]}):Object(S.jsx)(Z.a,{})}var ze=n(236),Ue=n(187),De=n(69),We=n.n(De),Fe=n(247),He=n(90),Be=n.n(He),Pe=n(222),Qe=n(245),Ae=Object(C.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},search:Object(T.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(E.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(E.b)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"100%"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:{padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},menuButton:{display:"flex",justifyContent:"center"}}})),qe=r.a.forwardRef((function(e,t){return Object(S.jsx)(Ue.a,Object(o.a)({direction:"up",ref:t},e))}));function Ve(e){var t=Ae(),n=Object(a.useState)(!1),c=Object(s.a)(n,2),i=c[0],o=c[1],l=Object(a.useState)(null),d=Object(s.a)(l,2),j=d[0],u=d[1],b=Object(a.useState)(null),O=Object(s.a)(b,2),m=O[0],p=O[1],x=Object(a.useState)(""),g=Object(s.a)(x,2),v=g[0],k=g[1],y=Object(a.useState)(""),C=Object(s.a)(y,2),w=C[0],N=C[1],_=Object(a.useState)(null),I=Object(s.a)(_,2),R=I[0],T=I[1],M=r.a.useRef(),E=function(){o(!0),k(""),h.a.get("/api/feeds/all").then((function(e){return e.data})).catch((function(e){return e})).then((function(e){u(e),p(e)})).catch((function(e){console.log(e)}))},L=function(){o(!1),T(null),N("")};return m?Object(S.jsxs)("div",{children:[Object(S.jsx)(oe.a,{title:"Add new feed",placement:"right",children:Object(S.jsxs)($.a,{button:!0,onClick:E,children:[Object(S.jsx)(ee.a,{className:t.menuButton,children:Object(S.jsx)(W.a,{edge:"start",color:"inherit","aria-label":"add new feed",children:Object(S.jsx)(We.a,{})})}),Object(S.jsx)(te.a,{primary:"Add new feed"})]})}),Object(S.jsxs)(ze.a,{fullScreen:!0,open:i,onClose:L,TransitionComponent:qe,children:[Object(S.jsx)(z.a,{className:t.appBar,children:Object(S.jsxs)(U.a,{children:[Object(S.jsx)(W.a,{edge:"start",color:"inherit",onClick:L,"aria-label":"close",children:Object(S.jsx)(de.a,{})}),Object(S.jsxs)("div",{className:t.search,ref:M,children:[Object(S.jsx)("div",{className:t.searchIcon,children:Object(S.jsx)(Be.a,{})}),Object(S.jsx)(Fe.a,{placeholder:"Search or enter URL",classes:{root:t.inputRoot,input:t.inputInput},inputProps:{"aria-label":"search"},value:v,onChange:function(e){k(e.target.value);var t=e.target.value?j.filter((function(t){return t.title.toLowerCase().includes(e.target.value.toLowerCase())||t.feedUrl.toLowerCase().includes(e.target.value.toLowerCase())})):j;p(t)},fullWidth:!0})]}),Object(S.jsx)(W.a,{autoFocus:!0,color:"inherit",onClick:function(t){var n;T(M.current),(n=v,h.a.post("/api/feeds",{url:n}).then((function(e){return e.data})).catch((function(e){return e.response.data}))).then((function(t){t.message?N(t.message):(N(""),T(null),e.setFeeds(null),o(!1),e.updateFeeds())})).catch((function(e){console.log(e)}))},children:Object(S.jsx)(We.a,{})}),Object(S.jsx)(Pe.a,{id:"error-popover",open:!!w,anchorEl:R,onClose:function(){return N("")},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:Object(S.jsx)(Qe.a,{severity:"error",children:w})})]})}),Object(S.jsx)(we.a,{children:m.map((function(e){return Object(S.jsxs)($.a,{button:!0,onClick:function(){return k(e.feedUrl)},children:[Object(S.jsx)(ee.a,{children:Object(S.jsx)(f.a,{variant:"rounded",src:P(e.link),alt:e.title})}),Object(S.jsx)(te.a,{primary:e.title})]},e._id)}))})]})]}):Object(S.jsx)(oe.a,{title:"Add new feed",placement:"right",children:Object(S.jsxs)($.a,{button:!0,onClick:E,children:[Object(S.jsx)(ee.a,{className:t.menuButton,children:Object(S.jsx)(W.a,{edge:"start",color:"inherit","aria-label":"add new feed",children:Object(S.jsx)(We.a,{})})}),Object(S.jsx)(te.a,{primary:"Add new feed"})]})})}var Ge=n(239),Je=n(122),Xe=n.n(Je),Ke=Object(C.a)((function(e){return{menuButton:{display:"flex",justifyContent:"center"}}}));function Ye(){var e=Ke(),t=Object(a.useState)([]),n=Object(s.a)(t,2),r=n[0],c=n[1],i=function(){c(null),h.a.get("/api/feeds").then((function(e){return e.data})).catch((function(e){return e})).then((function(e){c(e)})).catch((function(e){console.log(e)}))};return Object(a.useEffect)((function(){i()}),[]),r?Object(S.jsxs)(we.a,{children:[Object(S.jsx)(oe.a,{title:"Read later",placement:"right",children:Object(S.jsxs)($.a,{button:!0,component:j.c,to:"/read-later",activeClassName:"Mui-selected",children:[Object(S.jsx)(ee.a,{className:e.menuButton,children:Object(S.jsx)(W.a,{edge:"start",color:"inherit","aria-label":"read later",children:Object(S.jsx)(Xe.a,{})})}),Object(S.jsx)(te.a,{primary:"Read later"})]})}),r.map((function(e){return Object(S.jsx)(oe.a,{title:e.title,placement:"right",children:Object(S.jsxs)($.a,{button:!0,component:j.c,to:"/".concat(e._id),activeClassName:"Mui-selected",children:[Object(S.jsx)(Ge.a,{children:Object(S.jsx)(f.a,{variant:"rounded",src:P(e.link),alt:e.title})}),Object(S.jsx)(te.a,{primary:e.title})]})},e._id)})),Object(S.jsx)(Ve,{updateFeeds:i,setFeeds:c})]}):Object(S.jsx)(Z.a,{})}var Ze=Object(C.a)((function(e){return{feedItem:{padding:e.spacing(0,9,3,9)},feedItemHeading:{paddingBottom:e.spacing(1)},feedHeader:{display:"flex",justifyContent:"space-between"},toolbar:{paddingBottom:e.spacing(2)},highlight:{color:"inherit",backgroundColor:e.palette.primary.main}}}));function $e(e){var t=Ze(),n=Object(a.useState)(!1),r=Object(s.a)(n,2),c=r[0],i=r[1],o=function(){i(!c)};return Object(S.jsxs)(S.Fragment,{children:[c?Object(S.jsxs)($.a,{dense:!0,onClick:o,children:[Object(S.jsx)(te.a,{}),e.read?Object(S.jsx)(oe.a,{title:"Close",children:Object(S.jsx)(W.a,{size:"small",children:Object(S.jsx)(de.a,{})})}):Object(S.jsx)(oe.a,{title:"Mark read",children:Object(S.jsx)(W.a,{size:"small",onClick:function(){return e.handleMarkRead(e.item._id)},children:Object(S.jsx)(be.a,{})})})]}):Object(S.jsxs)($.a,{button:!0,dense:!0,children:[Object(S.jsx)(ee.a,{children:Object(S.jsx)(oe.a,{title:"Read later",children:e.starred?Object(S.jsx)(W.a,{size:"small",onClick:function(){return e.handleUnstarItem(e.item._id)},children:Object(S.jsx)(re.a,{fontSize:"small",color:e.read?"disabled":"inherit"})}):Object(S.jsx)(W.a,{size:"small",onClick:function(){return e.handleStarItem(e.item._id)},children:Object(S.jsx)(ie.a,{fontSize:"small",color:e.read?"disabled":"inherit"})})})}),Object(S.jsx)(te.a,{onClick:o,primary:Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)("div",{className:t.feedHeader,children:[Object(S.jsx)(y.a,{color:e.read?"textSecondary":"textPrimary",children:Object(S.jsx)(Oe.a,{highlightClassName:t.highlight,searchWords:[e.searchQuery],autoEscape:!0,textToHighlight:e.item.title})}),Object(S.jsx)("span",{children:Object(S.jsx)(y.a,{variant:"caption",color:e.read?"textSecondary":"textPrimary",children:Q(e.item.isoDate)})})]}),Object(S.jsx)(y.a,{variant:"caption",color:e.read?"textSecondary":"textPrimary",children:e.feedTitle})]})})]}),Object(S.jsx)(ne.a,{in:c,timeout:"auto",unmountOnExit:!0,children:Object(S.jsxs)(_.a,{component:"div",className:t.feedItem,children:[Object(S.jsx)(y.a,{variant:"h5",color:e.read?"textSecondary":"textPrimary",className:t.feedItemHeading,children:e.read?Object(S.jsx)(p.a,{href:e.item.link,target:"_blank",rel:"noreferrer",color:"inherit",underline:"none",children:Object(S.jsx)(Oe.a,{highlightClassName:t.highlight,searchWords:[e.searchQuery],autoEscape:!0,textToHighlight:e.item.title})}):Object(S.jsx)(p.a,{href:e.item.link,target:"_blank",rel:"noreferrer",color:"inherit",underline:"none",onClick:function(){return e.handleMarkRead(e.item._id)},children:Object(S.jsx)(Oe.a,{highlightClassName:t.highlight,searchWords:[e.searchQuery],autoEscape:!0,textToHighlight:e.item.title})})}),e.item.author||e.item.creator?Object(S.jsxs)(y.a,{variant:"subtitle2",paragraph:!0,children:[e.feedTitle," by ",e.item.author||e.item.creator,", ",new Date(e.item.isoDate).toLocaleString()," ",e.read?Object(S.jsx)(p.a,{href:"#",color:"textSecondary",onClick:function(){return e.handleUnmarkRead(e.item._id)},children:"mark unread"}):""]}):Object(S.jsxs)(y.a,{variant:"subtitle2",paragraph:!0,children:[e.feedTitle,", ",new Date(e.item.isoDate).toLocaleString()," ",e.read?Object(S.jsx)(p.a,{href:"#",color:"textSecondary",onClick:function(){return e.handleUnmarkRead(e.item._id)},children:"mark unread"}):""]}),e.item.categories.length>0?Object(S.jsxs)(y.a,{variant:"subtitle2",paragraph:!0,children:["Category: ",e.item.categories.join(", ")]}):Object(S.jsx)(S.Fragment,{}),Object(S.jsxs)(se.a,{className:t.toolbar,children:[Object(S.jsx)(oe.a,{title:"Read later",children:e.starred?Object(S.jsx)(O.a,{"aria-label":"read later",onClick:function(){return e.handleUnstarItem(e.item._id)},children:Object(S.jsx)(re.a,{})}):Object(S.jsx)(O.a,{"aria-label":"read later",onClick:function(){return e.handleStarItem(e.item._id)},children:Object(S.jsx)(ie.a,{})})}),Object(S.jsx)(O.a,{children:"Share"})]}),e.item["content:encoded"]||e.item.content?Object(S.jsx)(y.a,{variant:"body1",paragraph:!0,dangerouslySetInnerHTML:{__html:ue.a.sanitize(e.item["content:encoded"]||e.item.content)}}):Object(S.jsx)(S.Fragment,{}),e.read?Object(S.jsx)(O.a,{href:e.item.link,target:"_blank",rel:"noreferrer",variant:"outlined",fullWidth:!0,children:"Visit Website"}):Object(S.jsx)(O.a,{href:e.item.link,target:"_blank",rel:"noreferrer",variant:"outlined",fullWidth:!0,onClick:function(){return e.handleMarkRead(e.item._id)},children:"Visit Website"})]})}),Object(S.jsx)(D.a,{})]})}var et=Object(C.a)((function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper},feedDetails:{paddingTop:e.spacing(2)},feedHeader:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},feedToolbar:{display:"flex"},feedList:{padding:0}}}));function tt(e){var t=et(),n=Object(a.useState)(null),r=Object(s.a)(n,2),c=r[0],i=r[1],l=Object(a.useState)(null),d=Object(s.a)(l,2),j=d[0],u=d[1],b=Object(a.useState)(null),f=Object(s.a)(b,2),O=f[0],m=f[1],p=Object(a.useState)(null),x=Object(s.a)(p,2),g=x[0],v=x[1],k=function(e){A(e).then((function(e){e.message?console.log(e.message):m(e)})).catch((function(e){console.log(e)}))},C=function(e){q(e).then((function(e){m(e)})).catch((function(e){console.log(e)}))},w=function(e){G(e).then((function(e){e.message?console.log(e.message):Y().then((function(e){v(e)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))},N=function(e){J(e).then((function(){Y().then((function(e){v(e)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))},I=function(){e.setTitle("Read later"),i(null),u(null),V().then((function(e){m(e),h.a.get("/api/feeds/read-later").then((function(e){return e.data})).catch((function(e){return e})).then((function(e){Y().then((function(t){v(t),i(e),u(e)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))};return Object(a.useEffect)((function(){I()}),[e.match.params.id]),Object(a.useEffect)((function(){if(c){var t=e.searchQuery?c.filter((function(t){return t.title.toLowerCase().includes(e.searchQuery.toLowerCase())})):c;u(t)}}),[e.searchQuery]),j?Object(S.jsxs)("div",{className:t.root,children:[Object(S.jsxs)(_.a,{component:"div",className:t.feedDetails,children:[Object(S.jsxs)("div",{className:t.feedHeader,children:[Object(S.jsx)(y.a,{variant:"h4",children:"Read later"}),Object(S.jsxs)("div",{className:t.feedToolbar,children:[j.length-g.length===0?Object(S.jsx)(oe.a,{title:"All Read",children:Object(S.jsx)(W.a,{children:Object(S.jsx)(_e.a,{})})}):Object(S.jsx)(oe.a,{title:"Mark as Read",children:Object(S.jsx)(Ie.a,{anchorOrigin:{vertical:"top",horizontal:"left"},badgeContent:j.length-g.length,color:"primary",overlap:"circle",max:999,children:Object(S.jsx)(W.a,{onClick:function(){return function(e){var t=e.map((function(e){return e._id}));X(t).then((function(e){e.message?console.log(e.message):Y().then((function(e){v(e)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}(j)},children:Object(S.jsx)(be.a,{})})})}),Object(S.jsx)(oe.a,{title:"Refresh",children:Object(S.jsx)(W.a,{onClick:function(){return I()},children:Object(S.jsx)(Te.a,{})})}),Object(S.jsx)(oe.a,{title:"More options",children:Object(S.jsx)(W.a,{children:Object(S.jsx)(ke.a,{})})})]})]}),c.description?Object(S.jsx)(y.a,{variant:"subtitle1",children:c.description}):Object(S.jsx)(S.Fragment,{}),c.category?Object(S.jsxs)(y.a,{variant:"subtitle2",paragraph:!0,children:["Category: ",c.category.join(", "),", ",c.feedItems.length," articles"]}):Object(S.jsxs)(y.a,{variant:"subtitle2",paragraph:!0,children:[j.length," articles"]})]}),Object(S.jsx)(D.a,{}),Object(S.jsx)(we.a,{className:t.feedList,children:j.map((function(t){return Object(S.jsx)($e,Object(o.a)({feedTitle:t.feed.title,item:t,handleStarItem:k,handleUnstarItem:C,starred:O.includes(t._id),handleMarkRead:w,handleUnmarkRead:N,read:g.includes(t._id)},e),t._id)}))})]}):Object(S.jsx)(Z.a,{})}var nt=n(240),at=n(241),rt=Object(C.a)((function(e){return{root:{position:"fixed",bottom:e.spacing(2),right:e.spacing(4)}}}));function ct(e){var t=rt(),n=Object(nt.a)({target:e.contentRef.current,disableHysteresis:!0,threshold:100});return Object(S.jsx)(at.a,{in:n,children:Object(S.jsx)("div",{onClick:function(e){var t=(e.target.ownerDocument||document).querySelector("#back-to-top-anchor");t&&t.scrollIntoView({behavior:"smooth",block:"center"})},role:"presentation",className:t.root,children:e.children})})}function it(e){var t=r.a.useState(null),n=Object(s.a)(t,2),a=n[0],c=n[1],i=function(){c(null)};return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(oe.a,{title:"Account",children:Object(S.jsx)(W.a,{edge:"end",onClick:function(e){c(e.currentTarget)},color:"inherit",children:Object(S.jsx)(f.a,{src:e.user.picture,alt:e.user.username})})}),Object(S.jsxs)(xe.a,{anchorEl:a,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},id:"account-menu",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"center"},open:Boolean(a),onClose:i,children:[Object(S.jsx)(ge.a,{onClick:i,children:"Profile"}),Object(S.jsx)(ge.a,{onClick:function(){b().then((function(){e.setUser(null),e.history.push("/signin")})).catch((function(e){console.log(e)}))},children:"Sign Out"})]})]})}var ot=n(91),st=n(124),lt=n.n(st),dt=n(125),jt=n.n(dt),ut=n(243),ht=n(126),bt=n.n(ht),ft=Object(C.a)((function(e){return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(T.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{padding:0},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},search:Object(T.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(E.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(E.b)(e.palette.common.white,.25)},marginLeft:0,marginRight:e.spacing(1),width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(T.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}})}}));function Ot(e){var t=ft(),n=Object(ot.b)(),c=n.dark,i=n.toggleDark,j=Object(a.useState)(!1),u=Object(s.a)(j,2),h=u[0],b=u[1],f=Object(a.useState)(null),O=Object(s.a)(f,2),m=O[0],p=O[1],x=Object(a.useState)("Paperboy"),g=Object(s.a)(x,2),v=g[0],k=g[1],C=Object(a.useState)(""),w=Object(s.a)(C,2),N=w[0],I=w[1],R=r.a.useRef(),T=function(){p(null)};xe.a,Boolean(m),ge.a,ge.a;return Object(S.jsxs)("div",{className:t.root,children:[Object(S.jsx)(l.a,{}),Object(S.jsx)(z.a,{className:t.appBar,children:Object(S.jsxs)(U.a,{children:[Object(S.jsx)(W.a,{edge:"start",color:"inherit",onClick:function(){h&&b(!1),h||b(!0)},className:t.menuButton,children:Object(S.jsx)(H.a,{})}),Object(S.jsx)(y.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:t.title,children:v}),Object(S.jsxs)("div",{className:t.search,children:[Object(S.jsx)("div",{className:t.searchIcon,children:Object(S.jsx)(Be.a,{})}),Object(S.jsx)(Fe.a,{placeholder:"Search\u2026",classes:{root:t.inputRoot,input:t.inputInput},value:N,onChange:function(e){I(e.target.value)}})]}),Object(S.jsx)(oe.a,{title:"Toggle dark mode",children:Object(S.jsx)(W.a,{onClick:i,color:"inherit",children:c?Object(S.jsx)(lt.a,{}):Object(S.jsx)(jt.a,{})})}),Object(S.jsx)(it,Object(o.a)({},e))]})}),Object(S.jsxs)(L.a,{className:t.drawer,variant:"permanent",classes:{paper:Object(M.a)(t.drawerPaper,!h&&t.drawerPaperClose)},open:h,children:[Object(S.jsx)(U.a,{}),Object(S.jsx)(Ye,{}),Object(S.jsx)(D.a,{})]}),Object(S.jsxs)("main",{id:"content",className:t.content,ref:R,children:[Object(S.jsx)(U.a,{id:"back-to-top-anchor"}),Object(S.jsxs)(_.a,{maxWidth:"lg",className:t.container,children:[Object(S.jsxs)(d.d,{children:[Object(S.jsx)(d.b,{exact:!0,path:"/read-later",render:function(e){return Object(S.jsx)(tt,Object(o.a)({setTitle:k,searchQuery:N},e))}}),Object(S.jsx)(d.b,{exact:!0,path:"/:id",render:function(e){return Object(S.jsx)(Le,Object(o.a)({setTitle:k,searchQuery:N},e))}})]}),Object(S.jsx)(ct,Object(o.a)(Object(o.a)({contentRef:R},e),{},{children:Object(S.jsx)(ut.a,{color:"primary",size:"small",children:Object(S.jsx)(bt.a,{})})}))]})]})]})}var mt=function(e){var t=r.a.useState(e.user),n=Object(s.a)(t,2),a=n[0],c=n[1];return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(l.a,{}),Object(S.jsx)(d.b,{path:"/",render:function(e){return a?Object(S.jsx)(Ot,Object(o.a)({setUser:c,user:a},e)):Object(S.jsx)(d.a,{to:"/signin"})}}),Object(S.jsx)(d.b,{exact:!0,path:"/signin",render:function(e){return Object(S.jsx)(N,Object(o.a)({setUser:c},e))}}),Object(S.jsx)(d.b,{exact:!0,path:"/signup",render:function(e){return Object(S.jsx)(R,Object(o.a)({setUser:c},e))}})]})},pt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,249)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))},xt=n(127),gt=Object(xt.a)(),vt=Object(xt.a)({palette:{type:"dark"}});h.a.get("/api/auth/loggedin").then((function(e){var t=e.data;i.a.render(Object(S.jsx)(ot.a,{lightTheme:gt,darkTheme:vt,followSystem:"true",persist:"true",appId:"paperboy",children:Object(S.jsx)(j.a,{children:Object(S.jsx)(mt,{id:"paperboy",user:t})})}),document.getElementById("root"))})).catch((function(e){console.log(e)})),pt()}},[[182,1,2]]]);
//# sourceMappingURL=main.60efb783.chunk.js.map